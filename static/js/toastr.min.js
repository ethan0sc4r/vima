var toastr = (function() {
    var toastr = {
        options: {},
        success: function(message, title, optionsOverride) {
            this._notify('success', message, title, optionsOverride);
        },
        error: function(message, title, optionsOverride) {
            this._notify('error', message, title, optionsOverride);
        },
        warning: function(message, title, optionsOverride) {
            this._notify('warning', message, title, optionsOverride);
        },
        info: function(message, title, optionsOverride) {
            this._notify('info', message, title, optionsOverride);
        },
        _notify: function(type, message, title, optionsOverride) {
            var options = this.options;
            if (optionsOverride) {
                for (var key in optionsOverride) {
                    if (optionsOverride.hasOwnProperty(key)) {
                        options[key] = optionsOverride[key];
                    }
                }
            }

            var container = document.getElementById('toast-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'toast-container';
                container.className = options.positionClass || 'toast-top-right';
                document.body.appendChild(container);
            }

            var toastElement = document.createElement('div');
            toastElement.className = 'toast toast-' + type;
            if (title) {
                var titleElement = document.createElement('div');
                titleElement.className = 'toast-title';
                titleElement.textContent = title;
                toastElement.appendChild(titleElement);
            }
            if (message) {
                var messageElement = document.createElement('div');
                messageElement.className = 'toast-message';
                messageElement.textContent = message;
                toastElement.appendChild(messageElement);
            }

            if (options.closeButton) {
                var closeButton = document.createElement('button');
                closeButton.className = 'toast-close-button';
                closeButton.innerHTML = '&times;';
                closeButton.onclick = function() {
                    toastElement.remove();
                };
                toastElement.prepend(closeButton);
            }

            if (options.newestOnTop) {
                container.prepend(toastElement);
            } else {
                container.appendChild(toastElement);
            }

            setTimeout(function() {
                toastElement.remove();
            }, options.timeOut || 5000);
        }
    };
    return toastr;
})();